{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Dashboard - Bug Tracker</title>
    <style>
        body { font-family: Arial; margin: 0; padding: 0 20px; background: #f4f6f7; }
        nav { background:#34495e; color:white; padding:10px 20px; }
        nav a { color:white; text-decoration:none; margin-left:15px; }
        .nav-right { float:right; }
        .cards { display:flex; justify-content:space-around; margin:20px 0; }
        .card { padding:15px; border-radius:5px; color:white; width:22%; text-align:center; }
        .total { background-color:#34495e; }
        .open { background-color:#3498db; }
        .progress { background-color:#f39c12; }
        .closed { background-color:#2ecc71; }
        .create-btn { background:#3498db; color:white; padding:10px 15px; border-radius:5px; text-decoration:none; margin-top:20px; display:inline-block; }
        table { width:100%; border-collapse:collapse; margin-top:20px; background:white; }
        th, td { border:1px solid #ccc; padding:10px; text-align:center; }
        th { background:#bdc3c7; }
        .high { color:red; font-weight:bold; }
        .medium { color:orange; font-weight:bold; }
        .low { color:green; font-weight:bold; }
    </style>
</head>
<body>

<!-- Navigation -->
<nav>
    Bug Tracker Dashboard
    <span class="nav-right">
        Welcome, {{ request.user.username }} |
        <a href="{% url 'dashboard' %}">Dashboard</a> |
        <a href="{% url 'create_issue' %}">Create Issue</a> |
        <a href="{% url 'history' %}">History</a> |
        <a href="{% url 'filter_search' %}">Filter / Search</a> |
        <a href="{% url 'logout' %}">Logout</a>
    </span>
</nav>

<h2>Dashboard</h2>
<p>Welcome to your Bug Tracker Dashboard. Use the navigation above to access all features.</p>

<div class="cards">
    <div class="card total">Total Issues<br>{{ total_issues }}</div>
    <div class="card open">Open<br>{{ open_issues }}</div>
    <div class="card progress">In Progress<br>{{ in_progress_issues }}</div>
    <div class="card closed">Closed<br>{{ closed_issues }}</div>
</div>

<p>
    <a href="{% url 'create_issue' %}" class="create-btn">+ Create New Issue</a>
</p>

<h3>Recent Issues</h3>
<table>
    <tr>
        <th>ID</th>
        <th>Title</th>
        <th>Status</th>
        <th>Priority</th>
        <th>Created</th>
    </tr>
    {% for issue in issues|slice:":5" %}
    <tr>
        <td>{{ issue.id }}</td>
        <td>{{ issue.title }}</td>
        <td>{{ issue.status }}</td>
        <td class="{% if issue.priority == 'High' %}high{% elif issue.priority == 'Medium' %}medium{% else %}low{% endif %}">
            {{ issue.priority }}
        </td>
        <td>{{ issue.created_at|date:"d M Y" }}</td>
    </tr>
    {% empty %}
    <tr>
        <td colspan="5">No issues found</td>
    </tr>
    {% endfor %}
</table>

</body>
</html>
